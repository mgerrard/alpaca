<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>ALPACA docs</title>
  <style>
    html {
      line-height: 1.7;
      font-family: Georgia, serif;
      font-size: 20px;
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 40em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      word-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 1em;
      }
    }
    @media print {
      body {
        background-color: transparent;
        color: black;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin-top: 1.7em;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.7em;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1.7em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1.7em 0 1.7em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      font-style: italic;
    }
    code {
      font-family: Menlo, Monaco, 'Lucida Console', Consolas, monospace;
      background-color: #f0f0f0;
      font-size: 85%;
      margin: 0;
      padding: .2em .4em;
    }
    pre {
      line-height: 1.5em;
      padding: 1em;
      background-color: #f0f0f0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin-top: 1.7em;
    }
    table {
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
    }
    th, td {
      border-bottom: 1px solid lightgray;
      padding: 1em 3em 1em 0;
    }
    header {
      margin-bottom: 6em;
      text-align: center;
    }
    nav a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
    }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header id="title-block-header">
<h1 class="title">ALPACA docs</h1>
</header>
<p>These pages document the implementation of ALPACA. Using a small program, we’ll see <a href="#what-alpaca-computes">what ALPACA computes</a>, see <a href="#alternating-conditional-analysis">how it computes this</a>, and <a href="#stepping-through-a-run">step through a run</a> of ALPACA to name the modules as they are used. An <a href="#index-to-source-files">index</a> to the documentation of individual source files is given at the end.</p>
<h2 id="what-alpaca-computes">What ALPACA computes</h2>
<p>ALPACA is an analysis tool that determines, for some program and some property-to-be-checked, all the program paths that <em>must</em> or <em>may</em> satisfy the property. (<em>Must</em> information guarantees reachability; <em>may</em> information overapproximates and could introduce false positives.) These program paths are expressed in logical formulae constraining the values of program inputs. For example, consider trying to determine the constraints on <code>x</code> and <code>y</code> that lead to reaching an <code>error()</code> call in the following C program.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>main() {</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">int</span> x=input(); <span class="dt">int</span> y=input();</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (x&lt;<span class="dv">0</span>) {</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>    error();</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> ((x&gt;<span class="dv">9</span>) &amp;&amp; (x&lt;y*y)) {</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    error();</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>We see that an <code>error()</code> can be reached in two ways: if <span class="math inline">\(x&lt;0\)</span>, or if <span class="math inline">\(x&gt;9 \land x&lt;y*y\)</span>; and all inputs that do not satisfy these constraints will avoid any <code>error()</code>. ALPACA runs a host of tools that look for reachability or unreachability proofs. If the underlying tools can determine the two reachability constraints described above as well as provide an unreachability proof in the remainder of the program (i.e., inputs not satisfying the two constraints), then ALPACA will return this exact description.</p>
<p>However, determining that all inputs outside of these constraints do not lead to an <code>error()</code> may be difficult for an automated static analysis due to the nonlinear constraint <span class="math inline">\(x&lt;y*y\)</span>. In this case, we may try relaxing the constraint of <span class="math inline">\(x&gt;9 \land x&lt;y*y\)</span> to be simply <span class="math inline">\(x&gt;9\)</span>. With the nonlinearity removed, the static analyses can prove that inputs outside of <span class="math inline">\(x&lt;0 \lor x&gt;9\)</span> will not lead to an <code>error()</code>, and the description of program paths returned by ALPACA becomes slightly more approximate: an <code>error()</code> <em>must</em> be reached if <span class="math inline">\(x&lt;0\)</span>, or if <span class="math inline">\(x&gt;9 \land x&lt;y*y\)</span>, and <em>may</em> be reached if <span class="math inline">\(x&gt;9\)</span>; everything not implied by these formulae will avoid the <code>error()</code>.</p>
<p>This mix of <em>must</em> and <em>may</em> characterizations is computed using the alternating conditional analysis framework, described next.</p>
<h2 id="alternating-conditional-analysis">Alternating Conditional Analysis</h2>
<p>ALPACA is an instantiation of the Alternating Conditional Analysis (ACA) framework. ACA builds upon ideas from conditional model checking <span class="citation" data-cites="beyer:2012:conditional">(Beyer et al. 2012)</span> and alternation between <em>may</em> and <em>must</em> pieces of information returned by an analysis <span class="citation" data-cites="godefroid:2010:compositional">(Godefroid et al. 2010)</span>. The general idea of ACA is to use many static analysis tools to iteratively collect either reachability or unreachability proofs in some part of a program, and to condition analysis tools to ignore the already-analyzed parts.</p>
<p>The flow diagram for ACA is given below.</p>
<p><img src="pics/flow-diagram.svg" /></p>
<p>The above flow diagram is directly reflected in its implementation within ALPACA. Below is the recursive <code>aca</code> function within <code>Analysis.lhs</code>.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ot">aca ::</span> <span class="dt">Program</span> <span class="ot">-&gt;</span> <span class="dt">Csc</span> <span class="ot">-&gt;</span> <span class="dt">AcaComputation</span> <span class="dt">Csc</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>aca program csc <span class="ot">=</span> <span class="kw">do</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  result <span class="ot">&lt;-</span> exploreSubspace program csc</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">case</span> result <span class="kw">of</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">UnreachableEvidence</span> <span class="ot">-&gt;</span> <span class="kw">do</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>      csc&#39; <span class="ot">&lt;-</span> enforceDisjointness csc</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>      lastWrites csc&#39;</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>      <span class="fu">return</span> csc&#39;</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>    (<span class="dt">ReachableEvidence</span> ev) <span class="ot">-&gt;</span> <span class="kw">do</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>      csc&#39; <span class="ot">&lt;-</span> characterize ev</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>      program&#39; <span class="ot">&lt;-</span> condition program csc&#39;</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>      aca program&#39; csc&#39;</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>    <span class="dt">NoEvidence</span> <span class="ot">-&gt;</span> <span class="kw">do</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>      csc&#39; <span class="ot">&lt;-</span> generalize csc</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>      program&#39; <span class="ot">&lt;-</span> condition program csc&#39;</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>      aca program&#39; csc&#39;</span></code></pre></div>
<h2 id="stepping-through-a-run">Stepping through a run</h2>
<h2 id="index-to-source-files">Index to source files</h2>
<p>The entrypoint of the program is <a href="app/Main.html">Main</a>, the high-level logic is in <a href="src/Analysis.html">Analysis</a>, and the rest is here:</p>
<ul>
<li><a href="src/AcaComputation.html">AcaComputation</a></li>
<li><a href="src/BinarySearch.html">BinarySearch</a></li>
<li><a href="src/Branch.html">Branch</a></li>
<li><a href="src/Characterize.html">Characterize</a></li>
<li><a href="src/CivlParsing.html">CivlParsing</a></li>
<li><a href="src/Configuration.html">Configuration</a></li>
<li><a href="src/CpaParsing.html">CpaParsing</a></li>
<li><a href="src/CscTypes.html">CscTypes</a></li>
<li><a href="src/LaunchBenchexec.html">LaunchBenchexec</a></li>
<li><a href="src/Lib.html">Lib</a></li>
<li><a href="src/LocalPaths.html">LocalPaths</a></li>
<li><a href="src/ModularAca.html">ModularAca</a></li>
<li><a href="src/Octagon.html">Octagon</a></li>
<li><a href="src/Parsing.html">Parsing</a></li>
<li><a href="src/Portfolio.html">Portfolio</a></li>
<li><a href="src/Reading.html">Reading</a></li>
<li><a href="src/Refine.html">Refine</a></li>
<li><a href="src/RunPortfolio.html">RunPortfolio</a></li>
<li><a href="src/Solver.html">Solver</a></li>
<li><a href="src/SolverLib.html">SolverLib</a></li>
<li><a href="src/Statistics.html">Statistics</a></li>
<li><a href="src/Transformations.html">Transformations</a></li>
<li><a href="src/Transformer.html">Transformer</a></li>
<li><a href="src/Writing.html">Writing</a></li>
</ul>
<h1 class="unnumbered" id="references">References</h1>
<div id="refs" class="references csl-bib-body hanging-indent" role="doc-bibliography">
<div id="ref-beyer:2012:conditional" class="csl-entry" role="doc-biblioentry">
Beyer, Dirk, Thomas A Henzinger, M Erkan Keremoglu, and Philipp Wendler. 2012. <span>“Conditional Model Checking: A Technique to Pass Information Between Verifiers.”</span> In <em>Proceedings of the ACM SIGSOFT 20th International Symposium on the Foundations of Software Engineering</em>, 1–11.
</div>
<div id="ref-godefroid:2010:compositional" class="csl-entry" role="doc-biblioentry">
Godefroid, Patrice, Aditya V Nori, Sriram K Rajamani, and Sai Deep Tetali. 2010. <span>“Compositional May-Must Program Analysis: Unleashing the Power of Alternation.”</span> In <em>Proceedings of the 37th Annual ACM SIGPLAN-SIGACT Symposium on Principles of Programming Languages</em>, 43–56.
</div>
</div>
</body>
</html>
